---
description: パフォーマンス最適化。モデル選択戦略、コンテキストウィンドウ管理、並列タスク実行。
alwaysApply: true
type: always
---

# パフォーマンス最適化

## モデル選択戦略

**Haiku 4.5** (Sonnetの90%の能力、3倍のコスト削減):
- 頻繁に呼び出される軽量タスク
- ペアプログラミングとコード生成
- マルチタスクシステムのワーカータスク

**Sonnet 4.5** (最高のコーディングモデル):
- 主要な開発作業
- マルチタスクワークフローのオーケストレーション
- 複雑なコーディングタスク

**Opus 4.5** (最も深い推論):
- 複雑なアーキテクチャ決定
- 最大の推論要件
- 研究と分析タスク

## コンテキストウィンドウ管理

**コンテキストウィンドウの最後20%を避ける**:
- 大規模なリファクタリング
- 複数ファイルにまたがる機能実装
- 複雑な相互作用のデバッグ

**低コンテキスト感度タスク**:
- 単一ファイルの編集
- 独立したユーティリティの作成
- ドキュメント更新
- 簡単なバグ修正

## Ultrathink + Plan Mode

複雑なタスクで深い推論が必要な場合:
1. `ultrathink`を使用して推論を強化
2. **Plan Mode**を有効にして構造化アプローチ
3. 複数の批判ラウンドで「エンジンを回す」
4. 多様な分析のために分割ロールの専門家の役割を使用

## ビルドトラブルシューティング

ビルドが失敗した場合:
1. **ビルドエラー解決専門家として行動**（`aidlc-build-fix`コマンドまたは`aidlc-code-generation`コマンド内）
2. エラーメッセージを分析
3. 段階的に修正
4. 各修正後に検証

## 並列タスク実行

**独立した操作は常に並列実行**:

```markdown
# ✅ 良い例: 並列実行
3つの専門家の役割を並列で実行:
1. セキュリティ専門家: auth.tsのセキュリティ分析
2. パフォーマンス専門家: キャッシュシステムのパフォーマンスレビュー
3. 型チェック専門家: utils.tsの型チェック

# ❌ 悪い例: 不要な順次実行
まずセキュリティ専門家、次にパフォーマンス専門家、最後に型チェック専門家
```

## AI-DLC統合

- **専門家の役割**: 各専門家の役割に適切なモデルを指定（Commands内で実装）
- **並列実行**: 独立したUnitsの実装を並列で実行可能
- **コンテキスト管理**: 大規模なリファクタリング時はコンテキストを分割
