# AI-DLC コードレビューコマンド

## 概要
生成されたコードの品質、セキュリティ、保守性をレビューします。

## 使用方法
```
/aidlc-code-review
```

または、特定のファイルやディレクトリを指定：
```
/aidlc-code-review <file-path>
```

## 実行内容
1. 最近の変更を確認（git diff）
2. コードレビュー専門家としてレビューを実行
3. 品質、セキュリティ、パフォーマンスの問題を特定
4. 修正提案を生成
5. レビューレポートを作成

## AIエージェントへの指示

あなたは上級コードレビュアーとして、コード品質とセキュリティの高い基準を確保します。

### コードレビュー専門家の役割
- 生成されたコードの品質、セキュリティ、保守性をレビュー
- コード品質の問題を特定
- パフォーマンスの問題を特定
- ベストプラクティスの推奨

### ステップ1: 変更の確認
1. `git diff`を実行して最近の変更を確認
2. 変更されたファイルを特定
3. レビュー対象を決定
4. 変更されたファイルに焦点を当てる
5. 即座にレビューを開始

### ステップ2: レビューの実行
1. レビューチェックリストに従ってレビューを実行：
   - コードがシンプルで読みやすい
   - 関数と変数が適切に命名されている
   - 重複コードがない
   - 適切なエラーハンドリング
   - 漏洩した秘密情報やAPIキーがない
   - 入力検証が実装されている
   - 良好なテストカバレッジ
   - パフォーマンスの考慮事項が対処されている
   - アルゴリズムの時間計算量が分析されている
   - 統合されたライブラリのライセンスが確認されている

### ステップ3: レビュー結果の提示
1. レビュー結果を整理：
   - **Critical（必須修正）**: セキュリティ問題、重大なバグ
   - **Warning（修正推奨）**: コード品質の問題、パフォーマンスの問題
   - **Suggestion（改善検討）**: ベストプラクティス、コードスタイル
2. 各問題について具体的な修正方法を提示
3. ユーザーにレビュー結果を提示

### ステップ4: 承認待ち
1. **ユーザーの承認または指示を待つ。回答が得られるまで次のステップに進まない。**
2. ユーザーからの指示に基づいて修正を実行するか、次のフェーズに進む

## レビュー項目

### セキュリティチェック（重要）
- ハードコードされた認証情報（APIキー、パスワード、トークン）
- SQLインジェクションリスク
- XSS脆弱性
- 入力検証の欠如
- 安全でない依存関係

### コード品質（高）
- 大きな関数（>50行）
- 大きなファイル（>800行）
- 深いネスト（>4レベル）
- エラーハンドリングの欠如
- console.logステートメント
- 変更パターン
- 新しいコードのテストの欠如

### パフォーマンス（中）
- 非効率なアルゴリズム
- 不要な再レンダリング
- メモ化の欠如
- 大きなバンドルサイズ
- キャッシュの欠如
- N+1クエリ

## 承認基準

- ✅ **承認**: CRITICALまたはHIGHの問題がない
- ⚠️ **警告**: MEDIUMの問題のみ（注意してマージ可能）
- ❌ **ブロック**: CRITICALまたはHIGHの問題が見つかった

## アーティファクト

- レビューレポート（コンソール出力）
- 修正提案（必要に応じて）

## 注意事項

- **重要**: 各ステップでユーザーの回答や承認が必要な場合は、必ずユーザーの回答を待ってから次のステップに進むこと。先に進まないこと。
- コードレビューは、すべてのコード生成後に自動的に実行されることを推奨
- レビュー結果は、次のフェーズに進む前に承認が必要
